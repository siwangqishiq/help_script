
选择一台做服务器 Server 另外一台做客户端Client
记录四个时间 $ t_1$ , $t_2$ , $t_3$ , $t_4$

$t_1$ 客户端发送报文的时间

$t_2$ 服务器接收到报文的时间

$t_3$ 服务器返回ACK报文的时间

$t_4$ 客户端接收ACK报文的时间

延迟 $delay$满足 

$delay$ = ($t_4$ - ${t_1}$) - ($t_3$ - $t_2$) 

且客户端 与服务端的时间差满足方程: 

$t_2$ = ${t_1}$ + $offset$ +$delay$ / 2  

$t_4$ = ${t_3}$ - $offset$ +$delay$ / 2 

方程连立 可求得${offset}$

$offset = ((t_2 - t_1) + (t_3 - t_4) ) / 2$

这个$offset$就是两个设备较为准确的时间差了
